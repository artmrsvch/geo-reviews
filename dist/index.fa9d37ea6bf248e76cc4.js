(function(r){var n={};function a(e){if(n[e]){return n[e].exports}var t=n[e]={i:e,l:false,exports:{}};r[e].call(t.exports,t,t.exports,a);t.l=true;return t.exports}a.m=r;a.c=n;a.d=function(e,t,r){if(!a.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:r})}};a.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};a.t=function(t,e){if(e&1)t=a(t);if(e&8)return t;if(e&4&&typeof t==="object"&&t&&t.__esModule)return t;var r=Object.create(null);a.r(r);Object.defineProperty(r,"default",{enumerable:true,value:t});if(e&2&&typeof t!="string")for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r};a.n=function(t){var e=t&&t.__esModule?function e(){return t["default"]}:function e(){return t};a.d(e,"a",e);return e};a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};a.p="";return a(a.s=0)})([function(e,t,r){"use strict";r.r(t);var n=r(1);var a=r.n(n);ymaps.ready(o);function o(){var o=document.querySelector("#overlay");var i=document.querySelector("#otziv");var s=document.querySelector(".create");var l=localStorage;var t;var u;var c;var d=new Array;var r=ymaps.templateLayoutFactory.createClass('<div class="baloon-container">'+'<div class="baloon-container__top">'+'<div class="ballon_place ballon_our"><strong>{{ properties.reviews.place|raw }}</strong></div>'+'<a href="#" id="links" class="ballon_adres ballon_our">{{ properties.adressReview|raw }}</a>'+'<div class="ballon_area ballon_our">{{ properties.reviews.area|raw }}</div>'+"</div>"+'<span class="ballon_time ballon_our">{{ properties.date|raw }}</span>'+"</div>",{build:function e(){r.superclass.build.call(this);document.querySelector("#links").addEventListener("click",this.onCounterClick)},clear:function e(){document.querySelector("#links").removeEventListener("click",this.onCounterClick);r.superclass.clear.call(this)},onCounterClick:function e(t){t.preventDefault();var r=n(t.target.previousElementSibling.textContent);p(t.target.textContent,r);m(t.target.textContent);v.balloon.close()}});try{t=JSON.parse(l.data)}catch(e){t=undefined}var v=new ymaps.Map("maps",{center:[55.7482921,37.5900027],zoom:15});v.events.add("click",function(e){if(s.innerHTML!=""){s.innerHTML="";a(e)}else{a(e)}});function n(t){var e=b.getGeoObjects();var r;e.forEach(function(e){if(t==e.properties._data.reviews.place){r=e.geometry._coordinates}});return r}function a(e){var t=e.get("coords");ymaps.geocode(t).then(function(e){var t=e.geoObjects.get(0);return t.getAddressLine()}).then(function(e){p(e,t)})}function f(e,t,r,n){var a;if(n==undefined){a=g(new Date)}else{a=n}var o=new ymaps.Placemark(e,{adressReview:t,reviews:r,date:a},{preset:"islands#violetIcon"});d.push({coord:e,adres:t,review:r,date:a});l.data=JSON.stringify(d);v.geoObjects.add(o);b.add(o);return o}function p(e,t){var r=Handlebars.compile(o.innerHTML);var n=r({position:e});s.innerHTML=n;u=e;c=t;var a=document.querySelector(".review-container__header");a.addEventListener("mousedown",function e(t){t.preventDefault();var r=s;r.style.position="absolute";var n=c(r);var a=t.pageX-n.left;var o=t.pageY-n.top;i(t.pageX,t.pageY);function i(e,t){r.style.left=e-a+"px";r.style.top=t-o+"px"}function l(e){i(e.pageX,e.pageY)}document.addEventListener("mousemove",l);r.onmouseup=function(){document.removeEventListener("mousemove",l);r.onmousemove=null;r.onmouseup=null};document.oncontextmenu=u;function u(){return}function c(e){var t=e.getBoundingClientRect();return{top:t.top+pageYOffset,left:t.left+pageXOffset}}})}s.addEventListener("click",function(e){if(e.target.className=="close-reviews"){s.innerHTML=""}else if(e.target.className=="i-btn"){var t=y(new Date);f(c,u,{name:document.querySelector(".i-name").value,place:document.querySelector(".i-place").value,area:document.querySelector(".i-area").value,dateModal:t});document.querySelector(".i-name").value="";document.querySelector(".i-place").value="";document.querySelector(".i-area").value="";m(u)}});function m(t){var e=b.getGeoObjects();var r=new Array;e.forEach(function(e){if(t==e.properties._data.adressReview){r.push(e.properties._data.reviews)}});var n=Handlebars.compile(i.innerHTML);var a=n(r);document.querySelector(".reviews").innerHTML=a}v.geoObjects.events.add("click",function(e){var t=e.get("target");console.log(t);if(t.properties._data.geoObjects){}else{p(t.properties._data.adressReview,e.get("coords"));m(t.properties._data.adressReview)}});function g(e){var t=e.getDate();if(t<10)t="0"+t;var r=e.getMonth()+1;if(r<10)r="0"+r;var n=e.getFullYear();var a=e.getSeconds();if(a<10)a="0"+a;var o=e.getMinutes();if(o<10)o="0"+o;var i=e.getHours();if(i<10)i="0"+i;return n+"."+r+"."+t+"  "+i+":"+o+":"+a}function y(e){var t=e.getDate();if(t<10)t="0"+t;var r=e.getMonth()+1;if(r<10)r="0"+r;var n=e.getFullYear();return t+"."+r+"."+n}var b=new ymaps.Clusterer({clusterDisableClickZoom:true,clusterOpenBalloonOnClick:true,preset:"islands#invertedVioletClusterIcons",clusterBalloonContentLayout:"cluster#balloonCarousel",clusterBalloonItemContentLayout:r,clusterBalloonPanelMaxMapArea:0,clusterBalloonContentLayoutWidth:200,clusterBalloonContentLayoutHeight:130,clusterBalloonPagerSize:5});v.geoObjects.add(b);if(t){t.forEach(function(e){f(e.coord,e.adres,e.review,e.date)})}}},function(e,t){}]);
//# sourceMappingURL=index.fa9d37ea6bf248e76cc4.js.map